notifications:
  email:
    on_success: never
    on_failure: change

os: linux

language: android

cache:
  timeout: 600
  directories:
    - node_modules

android:
  components:
    - build-tools-19.1.0
    - android-22

jdk:
  - oraclejdk8

before_install:
  - echo "Before Install stage"

install:
  - echo "Install stage"
  - nvm ls
  - nvm install 6
  - nvm use 6
  # - curl -sL https://deb.nodesource.com/setup_6.x | sudo bash -
  # - sudo apt-get install -y python-software-properties nodejs
  - npm install -g npm ionic cordova
  - npm prune
  - npm install

script:
  - echo "Start Linting"
  - npm test
  - echo "Start Build Test"
  - npm run build
  - echo "Cordova Build Android Test"
  - ionic cordova build android

after_success:
  - echo "Build Success"

after_failure:
# What if your test fails?
- echo "After failure stage"
- ionic info
